rules:
  html_custom_false:
    description: "Standard Hugo posts (no custom HTML)"
    match_front_matter:
      custom_html: false
    best_practices:
      - standard_hugo_markdown: true

  html_custom_normal:
    description: "Normal HTML posts (CSS & JS overrides without 3D)"
    match_front_matter:
      custom_html: normal
    requirements:
      - html_structure:
          forbid_full_document_tags: ["!DOCTYPE", "html", "head", "body"]
          scoped_styles: true
          preserve_hugo_layout: true
      - script_handling:
          allow_module_scripts: true

  html_custom_embed:
    description: "Inline Three.js embed posts"
    match_front_matter:
      custom_html: embed
    requirements:
      - html_structure:
          container_class: "threejs-container"
          scoped_styles: true
          preserve_hugo_layout: true
      - script_handling:
          external_scripts_last: true
          module_scripts: true

  html_custom_fullscreen:
    description: "Full-screen Three.js background posts (no controls)"
    match_front_matter:
      custom_html: full-screen
    requirements:
      - html_structure:
          forbid_full_document_tags: ["!DOCTYPE", "html", "head", "body"]
          container_class: "threejs-container"
          preserve_hugo_layout: false
      - script_handling:
          external_scripts_last: true
          module_scripts: true
      - responsive_design:
          full_viewport: true
    implementation_guide:
      - container_structure: |
          Place a single `<style>` block immediately after the front matter to hold all custom CSS for the post.
          Immediately after the `<style>` block, wrap the animation scene (scripts, etc.) in a single div.
          Use class="threejs-container" for Three.js or class="webgl-container" for generic WebGL.
          Example:
          ```html
          ---
          frontmatter
          ---
          <style>
            /* Styles for .threejs-container, canvas, AND .content-container go here */
            .threejs-container {
              position: fixed;
              top: 0;
              left: 0;
              width: 100vw;
              height: 100vh;
              z-index: -1;
              /* ... other styles */
            }

            .threejs-container canvas {
              display: block;
              width: 100%;
              height: 100%;
            }

            .content-container {
               /* ... content overlay styles */
               background: rgba(0, 0, 0, 0.1);
               border-radius: 8px;
               box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
               padding: 2rem;
               margin: 5vh auto;
               max-width: 800px;
               position: relative;
               z-index: 1;
            }
          </style>

          <div class="threejs-container"> <!-- Container div -->
          <canvas id="threejs-container"></canvas> <!-- Canvas element -->
            <!-- All <script type="importmap">, <script type="module">, etc. go here -->
            <script>...</script>
          </div>
          ```

  html_custom_controls:
    description: "Full-screen Three.js background posts with OrbitControls"
    match_front_matter:
      custom_html: controls
    requirements:
      - html_structure:
          forbid_full_document_tags: ["!DOCTYPE", "html", "head", "body"]
          global_body_styles: true
          preserve_hugo_layout: false
      - script_handling:
          external_scripts_last: true
          module_scripts: true
          require_orbitcontrols: true
      - responsive_design:
          full_viewport: true